<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Contribution 4: Porting to Python 3 and and other changes - Nivedita Rufus</title><meta name="Description" content=""><meta property="og:title" content="Contribution 4: Porting to Python 3 and and other changes" />
<meta property="og:description" content="After considering declining support for Python 2 programming language and added benefits from upgrades to Python 3, it is always advisable for a developer to select Python version 3. So, from the statement above, it is pretty much obvious that the first task assigned to me was porting the People Counter module from Python 2 to Python 3 which is done. Changes made are:
 Changed all print statements from print &quot; &quot; to print()." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://niveditarufus.github.io/posts/contribution-4/" />
<meta property="article:published_time" content="2020-05-17T15:02:35+05:30" />
<meta property="article:modified_time" content="2020-05-17T15:02:35+05:30" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Contribution 4: Porting to Python 3 and and other changes"/>
<meta name="twitter:description" content="After considering declining support for Python 2 programming language and added benefits from upgrades to Python 3, it is always advisable for a developer to select Python version 3. So, from the statement above, it is pretty much obvious that the first task assigned to me was porting the People Counter module from Python 2 to Python 3 which is done. Changes made are:
 Changed all print statements from print &quot; &quot; to print()."/>
<meta name="application-name" content="Nivedita Rufus">
<meta name="apple-mobile-web-app-title" content="Nivedita Rufus"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://niveditarufus.github.io/posts/contribution-4/" /><link rel="prev" href="https://niveditarufus.github.io/posts/project-phase/" /><link rel="next" href="https://niveditarufus.github.io/posts/contribution-3/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Contribution 4: Porting to Python 3 and and other changes",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/niveditarufus.github.io\/posts\/contribution-4\/"
        },"genre": "posts","wordcount":  305 ,
        "url": "https:\/\/niveditarufus.github.io\/posts\/contribution-4\/","datePublished": "2020-05-17T15:02:35+05:30","dateModified": "2020-05-17T15:02:35+05:30","publisher": {
            "@type": "Organization",
            "name": "Nivedita Rufus"},"author": {
                "@type": "Person",
                "name": "Nivedita Rufus"
            },"description": ""
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Nivedita Rufus">Nivedita Rufus</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="https://www.facebook.com/NiveRufus/" title="facebook" rel="noopener noreffer" target="_blank"><i class='fab fa-facebook fa-fw'></i>  </a><a class="menu-item" href="https://github.com/niveditarufus" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><a class="menu-item" href="https://www.linkedin.com/in/nivedita-rufus-01b1b1193/" title="linkedin" rel="noopener noreffer" target="_blank"><i class='fab fa-linkedin fa-fw'></i>  </a><a class="menu-item" href="https://t.me/NiveditaRufus" title="telegram" rel="noopener noreffer" target="_blank"><i class='fab fa-telegram fa-fw'></i>  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Nivedita Rufus">Nivedita Rufus</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="https://www.facebook.com/NiveRufus/" title="facebook" rel="noopener noreffer" target="_blank"><i class='fab fa-facebook fa-fw'></i></a><a class="menu-item" href="https://github.com/niveditarufus" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a class="menu-item" href="https://www.linkedin.com/in/nivedita-rufus-01b1b1193/" title="linkedin" rel="noopener noreffer" target="_blank"><i class='fab fa-linkedin fa-fw'></i></a><a class="menu-item" href="https://t.me/NiveditaRufus" title="telegram" rel="noopener noreffer" target="_blank"><i class='fab fa-telegram fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><article class="page single"><h1 class="single-title animated flipInX">Contribution 4: Porting to Python 3 and and other changes</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Nivedita Rufus</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2020-05-17">2020-05-17</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;305 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;2 minutes&nbsp;</div>
        </div><div class="content" id="content"><p>After considering declining support for Python 2 programming language and added benefits from upgrades to Python 3, it is always advisable for a developer to select Python version 3. So, from the statement above, it is pretty much obvious that the first task assigned to me was porting the <a href="https://github.com/robocomp/human-detection/tree/master/components/peopleCounter" target="_blank" rel="noopener noreffer">People Counter</a> module from Python 2 to Python 3 which is done.
Changes made are:</p>
<ol>
<li>Changed all print statements from <code>print &quot; &quot;</code> to <code>print()</code>.</li>
<li>Python3 uses the module <code>queue</code> and not <code>Queue</code>.</li>
<li>In Python 3 there are two different types of strings:
<ul>
<li>The bytes type:<br>
This is just a sequence of bytes, Python doesn&rsquo;t know anything about how to interpret this as characters.</li>
<li>The str type:<br>
This is also a sequence of bytes, but Python knows how to interpret those bytes as characters.
So, to conversion of an empty string into bytes, can be done with<br>
<code>msg = bytes('', encoding = 'utf-8')</code></li>
</ul>
</li>
</ol>
<p>In this process I learned that due to significant refactoring done in the latest version python <a href="https://github.com/vita-epfl/openpifpaf" target="_blank" rel="noopener noreffer">openpifpaf library</a> some functions also need to be changed accordingly in our component. So, I have made the component work with the openpifpaf library version = 0.10.1. The changes I needed to make were:</p>
<ol>
<li>I had to change the line:<br>
<code>processed_image_cpu = transforms.image_transform(image.copy())</code><br>
in <a href="https://github.com/robocomp/human-detection/blob/master/components/openpifpafserver/src/specificworker.py" target="_blank" rel="noopener noreffer">specificworker.py</a> to:<br>
<code>processed_image_cpu, _, __ = transforms.EVAL_TRANSFORM(image_pil, [], None)</code><br>
because <code>image_transform</code> is no longer in <code>openpifpaf.transforms.</code> because of the version update of OpenpifPaf Library.</li>
<li>I also had to convert the image to a PIL image before passing it through the function mentioned above from a CV2 image as the function only accepts PIL image with the following:
<code>image_pil = PIL.Image.fromarray(image)</code></li>
</ol>
<p>There were also a few very minor bugs which I fixed. So Now the component is up and running and I have made <a href="https://github.com/robocomp/human-detection/pull/5" target="_blank" rel="noopener noreffer">Pull-request</a> for the same, do check it out!!!</p>
<h5 id="status-merged">Status: Merged</h5>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2020-05-17</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/project-phase/" class="prev" rel="prev" title="Project Phase - The Onset "><i class="fas fa-angle-left fa-fw"></i>Project Phase - The Onset </a>
            <a href="/posts/contribution-3/" class="next" rel="next" title="Contribution 3: Fixing default parameter values">Contribution 3: Fixing default parameter values<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.70.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank"></a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/twemoji/twemoji.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"twemoji":true};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
